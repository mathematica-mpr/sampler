version: 0.2

phases:
    install:
        runtime-versions:
            golang: 1.12
        commands:
            - echo Installation Started
            - go get github.com/montanaflynn/stats
            - go get -u gonum.org/v1/gonum/...
            - go get -u github.com/aws/aws-lambda-go/cmd/build-lambda-zip

    build:
        commands:
            #moving files in sampler
            - echo $LAMBDANAME
            - mkdir sampler
            - mv * sampler || true
            - cd sampler
            # Build our go application
            - echo build go project
            - go install ./simulate
            - go build -o main

            # zip go app
            - echo zip go project
            - zip -j main.zip main
            #- aws lambda update-function-code --function-name simulate --zip-file fileb://main.zip

artifacts:
    type: zip
    files:
        - '**/*'
